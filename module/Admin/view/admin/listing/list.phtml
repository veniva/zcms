<div class="header_cont">
    <div class="title"><?=$this->translate($this->title)?></div>
    <div style="float:right;">
        <button type="button" id="add_button" class="btn btn-primary btn-xs"><?=$this->translate('New')?></button>
        <button type="button" id="add_button" class="btn btn-primary btn-xs"><?=$this->translate('Delete')?></button>
    </div>
</div>
<div class="body_cont">
    <div class="filter">
        <label for="filter_category">Filter: </label>
        <select id="filter_category" onChange="goToHref(this.value)">
            <option value="<?=$this->langUrl('admin/listing')?>"><?=$this->translate('All categories')?></option>
            <?php foreach($this->categories as $category): ?>
                <?php $selected = ($category['id'] == $this->parentCategory) ? 'selected="selected"' : ''; ?>
                <option value="<?=$this->langUrl('admin/listing', ['id' => $category['id']])?>" <?=$selected?>>
                    <?=$category['indent'].$category['title']?>
                </option>
            <?php endforeach; ?>
        </select>
    </div>
    <table class="list_table" width="100%" cellpadding="5" cellspacing="0">
        <tr>
            <th style="width: 20px">#</th>
            <th style="width: 20px">&nbsp;</th>
            <th><?=$this->translate('Link Name')?></th>
            <th style="width: 150px;"><?=$this->translate('Category')?></th>
            <th style="width: 20px;"><?=$this->translate('Sort')?></th>
            <th style="width: 20px;"><?=$this->translate('Action')?></th>
        </tr>
        <?php foreach($this->listings as $listing): ?>
            <tr>
                <td><?=$listing->getId()?></td>
                <td><input type="checkbox" name="lid[]" value="<?=$listing->getId()?>" /></td>
                <td><?=$listing->getContent()->getLink()?></td>
                <td>
                    <?php foreach($listing->getCategories() as $category):?>
                        [<?=$category->getId()?>] <?=$category->getContent()->getTitle()?>
                    <?php endforeach; ?>
                </td>
                <td><?=$listing->getSort()?></td>
                <td>
                    <a class="img" href="<?=$this->langUrl('admin/listing', array(
                        'action' => 'edit',
                        'id' => $listing->getId(),
                        'page' => $this->page,
                    ))?>">
                        <img src="<?=$this->basePath()?>/img/admin/edit.gif" title="<?=$this->translate('edit')?>" />
                    </a>
                </td>
            </tr>
        <?php endforeach; ?>
    </table>
    <?=$this->paginationControl($this->listings, 'Sliding', 'paginator/category_sliding', ['route' => 'admin/listing', 'id' => $this->parentCategory])?>
</div>
