<?php
use Application\Service\Invokable\Misc;
$this->form->prepare();
?>
<div class="header_cont">
    <div class="title"><?=$this->translate($this->action." a category")?></div>
</div>
<div class="body_cont">
    <?=$this->form()->openTag($this->form)?>
    <table class="list_table" width="400" cellpadding="5" cellspacing="0">
        <tr>
            <td><label><?=$this->translate($this->form->get('title')->getLabel())?>:</label></td>
            <td>
                <?=$this->formInput($this->form->get('title'))?>
                <img src="<?=$this->basePath().'/img/flags/'.Misc::getDefaultLanguage()->getIsoCode()?>.png" />
                <div class="form-error">
                    <?=$this->formElementErrors($this->form->get('title'))?>
                </div>
            </td>
        </tr>
        <?php foreach(Misc::getActiveLangs() as $lang):?>
            <?php if($lang->getId() != Misc::getDefaultLanguage()->getId()): ?>
                <tr>
                    <td></td>
                    <td>
                        <?=$this->formInput($this->form->get('title_'.$lang->getIsoCode()))?>
                        <img src="<?=$this->basePath().'/img/flags/'.$lang->getIsoCode()?>.png" />
                        <div class="form-error">
                            <?=$this->formElementErrors($this->form->get('title_'.$lang->getIsoCode()))?>
                        </div>
                    </td>
                </tr>
            <?php endif; ?>
        <?php endforeach; ?>
        <tr>
            <td><label><?=$this->translate($this->form->get('sort')->getLabel())?></label></td>
            <td>
                <?=$this->formInput($this->form->get('sort'))?>
                <div class="form-error">
                    <?=$this->formElementErrors($this->form->get('sort'))?>
                </div>
            </td>
        </tr>
        <tr>
            <td>Parent category:</td>
            <td><?=($this->parentCategory instanceof \Application\Model\Entity\Category) ?
                    $this->parentCategory->getContent()->getTitle() :
                    $this->translate('Top')?></td><!--v_todo - insert a category tree select input here-->
        </tr>
        <tr>
            <td colspan="2">
                <button class="btn btn-primary btn-xs" name="categ_form"><?=$this->translate('Submit')?></button>
                <small> or <a href="<?=$this->langUrl('admin/category', [
                        'id' => isset($this->parentCategory) ? $this->parentCategory->getId() : null,
                        'page' => $this->page,
                    ])?>">Cancel</a></small>
            </td>
        </tr>
    </table>
    <?=$this->form()->closeTag()?>
    <div style="height:100px;">&nbsp;</div>
</div>